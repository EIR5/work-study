# 初始环境设置操作

#### 更改主机名
```Shell
# hostnamectl set-hostname k8s-master01
```

#### 配置节点Host[/etc/hosts]
```Shell
cat >> /etc/hosts << EOP
10.0.0.101 k8s-master-01 
10.0.0.102 k8s-node-01 
10.0.0.103 k8s-node-02
EOP
```

#### 关闭防火墙、
```Shell
systemctl shop firewalld
systemctl disable firewalld
```
#### SELinux
```Shell
setenforce 0 #临时
sed -i 's/enforcing/disabled/' /etc/selinux/config #永久
```
~~sed -i 's#SELINUX=enforcing#SELINUX=disabled#g' /etc/sysconfig/selinux~~
~~sed -i 's#SELINUX=enforcing#SELINUX=disabled#g' /etc/selinux/config~~

#### 关闭SWap分区：内存交换空间
```Shell
swapoff -a #临时
sed -ri 's/.*swap.*/#&/' /tec/fstab #永久
```

~~swapoff -a && sysctl -w vm.swappiness=0~~
~~sed -ri '/^[^#]*swap/s@^@#@' /etc/fstab~~

#### 将桥接的IPv4流量传递到iptables的链【IPv4与IPv6】
```Shell
cat >> /etc/sysctl.d/k8s.conf << EOF
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOP
```
#### 系统设置生效
```Shell
sysctl --system
```

#### 配置yum源
```Shell
rm -rf /etc/yum.repos.d/*  #注意执行前请备份
sudo curl -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo

wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
```


#### 服务器时间自动同步设置
```Shell
yum install ntpdate -y
ntpdate time.windows.com
```

#### 配置limit
```Shell
# ulimit -SHn 65535 
# vim /etc/security/limits.conf 
# 末尾添加如下内容
* soft nofile 65536 
* hard nofile 131072 
* soft nproc 65535 
* hard nproc 655350
* soft memlock unlimited 
* hard memlock unlimited
```